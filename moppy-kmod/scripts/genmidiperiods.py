midi_note_freq = [
	# octave -5
	8.1757989156,
	8.661957218,
	9.1770239974,
	9.7227182413,
	10.3008611535,
	10.9133822323,
	11.5623257097,
	12.2498573744,
	12.9782717994,
	13.75,
	14.5676175474,
	15.4338531643,

	# octave -4
	16.3515978312,
	17.323914436,
	18.3540479948,
	19.4454364826,
	20.601722307,
	21.8267644646,
	23.1246514194,
	24.4997147488,
	25.9565435988,
	27.5,
	29.1352350948,
	30.8677063286,

	# octave -3
	32.7031956624,
	34.647828872,
	36.7080959896,
	38.8908729652,
	41.203444614,
	43.6535289292,
	46.2493028388,
	48.9994294976,
	51.9130871976,
	55.0,
	58.2704701896,
	61.7354126572,

	# octave -2
	65.4063913248,
	69.295657744,
	73.4161919792,
	77.7817459304,
	82.406889228,
	87.3070578584,
	92.4986056776,
	97.9988589952,
	103.8261743952,
	110.0,
	116.5409403792,
	123.4708253144,

	# octave -1
	130.8127826496,
	138.591315488,
	146.8323839584,
	155.5634918608,
	164.813778456,
	174.6141157168,
	184.9972113552,
	195.9977179904,
	207.6523487904,
	220.0,
	233.0818807584,
	246.9416506288,

	# octave 0
	261.6255652992,
	277.182630976,
	293.6647679168,
	311.1269837216,
	329.627556912,
	349.2282314336,
	369.9944227104,
	391.9954359808,
	415.3046975808,
	440.0,
	466.1637615168,
	493.8833012576,

	# octave 1
	523.2511305984,
	554.365261952,
	587.3295358336,
	622.2539674432,
	659.255113824,
	698.4564628672,
	739.9888454208,
	783.9908719616,
	830.6093951616,
	880.0,
	932.3275230336,
	987.7666025152,

	# octave 2
	1046.5022611968,
	1108.730523904,
	1174.6590716672,
	1244.5079348864,
	1318.510227648,
	1396.9129257344,
	1479.9776908416,
	1567.9817439232,
	1661.2187903232,
	1760.0,
	1864.6550460672,
	1975.5332050304,

	# octave 3
	2093.0045223936,
	2217.461047808,
	2349.3181433344,
	2489.0158697728,
	2637.020455296,
	2793.8258514688,
	2959.9553816832,
	3135.9634878464,
	3322.4375806464,
	3520.0,
	3729.3100921344,
	3951.0664100608,

	# octave 4
	4186.0090447872,
	4434.922095616,
	4698.6362866688,
	4978.0317395456,
	5274.040910592,
	5587.6517029376,
	5919.9107633664,
	6271.9269756928,
	6644.8751612928,
	7040.0,
	7458.6201842688,
	7902.1328201216,

	# octave 5
	8372.0180895744,
	8869.844191232,
	9397.2725733376,
	9956.0634790912,
	10548.081821184,
	11175.3034058752,
	11839.8215267328,
	12543.8539513856,
	0.0,
	0.0,
	0.0,
	0.0
]

def create_period_table(output, tick_speed=80, null_octaves=None):

	if null_octaves is None:
		null_octaves = []

	midi_note_period = []

	for n, f in enumerate(midi_note_freq):
		if f != 0.0:
			period = (1000000 / f) / tick_speed
		else:
			period = 0.0

		midi_note_period.append(int(period))

		# print("%03d: %f, %d" % (n, f, period))

	l = ""
	i = 0
	n = 0
	o = -5

	with open(output, "w") as f:

		f.write("#ifndef __MIDI_H__\n")
		f.write("#define __MIDI_H__\n")
		f.write("\n")
		f.write("unsigned int midi_note_period[] = {\n")
		for p in midi_note_period:
			if o in null_octaves:
				l += "% 5d," % 0
			else:
				l += "% 5d," % p
			i += 1
			if i == 12:
				f.write(l + "  // octave % 2d (% 4d -% 4d)\n" % (o, n - 11, n))
				l = ''
				i = 0
				o += 1

			n += 1

		f.write("};\n")
		f.write("\n")
		f.write("#endif")

create_period_table("src/midi.h", 80, [-5, -4, 1, 2, 3, 4, 5])
